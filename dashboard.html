<!DOCTYPE html>
<html>
<head>
    <title>NIFTY 50 Alpha Dashboard</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="container">

    <h1>üìä Model Outlook</h1>

    <div class="card">
        <p>
            Select a stock below to see its expected
            performance ranking for this month based on
            our cross-sectional alpha model.
        </p>
    </div>

    <!-- Prediction Section -->
    <div class="card center">
        <h2>üîç Check Stock Outlook</h2>

        <select id="stockSelect">
            <option value="INFY.NS">INFY</option>
            <option value="RELIANCE.NS">RELIANCE</option>
            <option value="HDFCBANK.NS">HDFCBANK</option>
            <option value="TCS.NS">TCS</option>
            <option value="ICICIBANK.NS">ICICIBANK</option>
        </select>

        <br><br>

        <button class="primary-btn" onclick="predictStock()">
            Predict Performance
        </button>

        <div id="resultBox" style="margin-top:20px;"></div>
    </div>

    <div class="card">
        <h2>Strategy Notes</h2>
        <ul>
            <li>Cross-sectional ranking model</li>
            <li>Risk-normalized signals</li>
            <li>Transaction costs included</li>
            <li>NIFTY 50 universe</li>
        </ul>
    </div>

    <div class="card center">
        <h2>üí¨ Suggestions</h2>
        <p>We welcome your feedback.</p>

        <a href="https://forms.gle/hML7UWuNUwxEWpdJA" target="_blank">
            <button class="primary-btn">Submit Suggestion</button>
        </a>
    </div>

</div>

<!-- JavaScript Section -->
<script>
async function predictStock() {

    const ticker = document.getElementById("stockSelect").value;

    const response = await fetch("http://127.0.0.1:8000/predict", {
        method: "POST",
        headers: {
            "Content-Type": "application/json"
        },
        body: JSON.stringify({ ticker: ticker })
    });

    const data = await response.json();

    document.getElementById("resultBox").innerHTML = `
        <div class="card">
            <h3>${data.ticker}</h3>
            <p><strong>Percentile Rank:</strong> ${data.percentile_rank}%</p>
            <p><strong>Probability of Outperformance:</strong> ${(data.probability_outperform * 100).toFixed(1)}%</p>
            <p><strong>Risk Level:</strong> ${data.risk_level}</p>
        </div>
    `;
}
</script>

</body>
</html>
