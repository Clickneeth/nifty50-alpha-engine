<!DOCTYPE html>
<html>
<head>
    <title>NIFTY 50 Alpha Dashboard</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<h1>NIFTY 50 Alpha Engine</h1>

<select id="stockSelect"></select>

<button onclick="predictStock()">Check Stock</button>

<div id="resultBox"></div>

<script>

const API_URL = "https://nifty50-alpha-engine.onrender.com/rank";

async function loadStocks() {
    try {
        const response = await fetch(API_URL);
        const data = await response.json();

        if (data.status !== "success") return;

        const select = document.getElementById("stockSelect");
        select.innerHTML = "";

        data.ranking.forEach(stock => {
            const option = document.createElement("option");
            option.value = stock.ticker;
            option.textContent = stock.ticker.replace(".NS", "");
            select.appendChild(option);
        });

    } catch (error) {
        console.log("Error loading stocks", error);
    }
}

async function predictStock() {

    const ticker = document.getElementById("stockSelect").value;
    const resultBox = document.getElementById("resultBox");

    resultBox.innerHTML = "<p>Loading...</p>";

    try {
        const response = await fetch(API_URL);
        const data = await response.json();

        const stock = data.ranking.find(s => s.ticker === ticker);

        resultBox.innerHTML = `
            <h3>${stock.ticker}</h3>
            <p>Rank: ${stock.rank}</p>
            <p>Percentile: ${stock.percentile}%</p>
        `;

    } catch (error) {
        resultBox.innerHTML = "<p>Error fetching data</p>";
    }
}

document.addEventListener("DOMContentLoaded", loadStocks);

</script>

</body>
</html>
